# ============================================================================
# Project Tracker - Environment Configuration Template
# ============================================================================
# Copy this file to .env and update with your values

# ============================================================================
# Application Settings
# ============================================================================

APP_NAME=Project Tracker
VERSION=0.2.0
DEBUG=false

# ============================================================================
# Commercial Module Configuration
# ============================================================================

# Commercial mode determines which modules are enabled
# Options: basic, gtd, proactive_assistant, full
# - basic: Core + Projects (default)
# - gtd: Core + Projects + GTD Inbox
# - proactive_assistant: Core + Projects + Memory Layer + AI Context
# - full: All modules enabled
COMMERCIAL_MODE=basic

# Or explicitly specify modules (overrides COMMERCIAL_MODE)
# ENABLED_MODULES=["core", "projects", "memory_layer"]

# ============================================================================
# Server Settings
# ============================================================================

# Server host and port (used when running directly with python main.py)
SERVER_HOST=0.0.0.0
SERVER_PORT=8000

# ============================================================================
# Database Configuration
# ============================================================================

# SQLite database path (default: ~/.project-tracker/tracker.db)
# DATABASE_PATH=/path/to/custom/tracker.db

# Log SQL queries to console (useful for debugging)
DATABASE_ECHO=false

# ============================================================================
# Second Brain Integration
# ============================================================================

# Root path to your Second Brain (PARA-organized directory)
# Windows: Use forward slashes or escaped backslashes
# REQUIRED for sync features - uncomment and set your path
# Example: G:/My Drive/999_SECOND_BRAIN
# SECOND_BRAIN_ROOT=/path/to/your/second-brain

# Directories to watch for markdown files (comma-separated)
# These should be relative to SECOND_BRAIN_ROOT
WATCH_DIRECTORIES=10_Projects,20_Areas

# Sync interval for periodic sync (seconds)
# Set to 0 to disable periodic sync
SYNC_INTERVAL=30

# Conflict resolution strategy when both file and database changed
# Options: prompt, file_wins, db_wins
# - prompt: Raise error, require manual resolution
# - file_wins: Always use file version
# - db_wins: Always use database version
CONFLICT_STRATEGY=prompt

# ============================================================================
# AI Integration (Anthropic Claude API)
# ============================================================================

# Anthropic API key (required for AI features)
# Get your API key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# AI model to use
# Options: claude-sonnet-4-5-20250929, claude-opus-4-5-20251101
AI_MODEL=claude-sonnet-4-5-20250929

# Maximum tokens for AI responses
AI_MAX_TOKENS=2000

# Enable AI features (unstuck task generation, project analysis)
# Set to true only after configuring ANTHROPIC_API_KEY
AI_FEATURES_ENABLED=true

# ============================================================================
# Momentum & Intelligence Settings
# ============================================================================

# Days before momentum decays to 0 (activity factor)
# Projects with no activity for this many days get 0 activity score
MOMENTUM_ACTIVITY_DECAY_DAYS=30

# Days of inactivity before project is marked as stalled
MOMENTUM_STALLED_THRESHOLD_DAYS=14

# Days of inactivity before project is considered "at risk"
MOMENTUM_AT_RISK_THRESHOLD_DAYS=7

# How often to recalculate momentum scores (seconds)
# Set to 0 to disable automatic recalculation
MOMENTUM_RECALCULATE_INTERVAL=3600

# ============================================================================
# Authentication (Google OAuth)
# ============================================================================

# Enable authentication (set to true for production use)
# When false, all routes are accessible without login (development mode)
AUTH_ENABLED=false

# JWT secret key for signing tokens
# IMPORTANT: Generate a secure random key for production!
# Use: openssl rand -hex 32
SECRET_KEY=change-me-in-production-use-openssl-rand-hex-32

# JWT token expiration
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=10080
JWT_REFRESH_TOKEN_EXPIRE_DAYS=30

# Google OAuth credentials
# Get these from: https://console.cloud.google.com/apis/credentials
# 1. Create a project
# 2. Configure OAuth consent screen
# 3. Create OAuth 2.0 Client ID (Web application)
# 4. Add authorized redirect URI: http://localhost:8000/api/v1/auth/google/callback
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Google OAuth redirect URI (must match Google Cloud Console setting)
GOOGLE_REDIRECT_URI=http://localhost:8000/api/v1/auth/google/callback

# Frontend URL for OAuth redirects
FRONTEND_URL=http://localhost:5173

# ============================================================================
# API Configuration
# ============================================================================

# API version prefix
API_V1_PREFIX=/api/v1

# CORS allowed origins
# Comma-separated list of allowed origins, or JSON array format
# Examples:
#   CORS_ORIGINS=http://localhost:3000,http://localhost:5173
#   CORS_ORIGINS=["http://localhost:3000","https://myapp.example.com"]
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Write logs to file (default: backend/logs/)
LOG_TO_FILE=true

# Output logs to console
LOG_TO_CONSOLE=true

# Custom log directory (optional, default: backend/logs/ in project directory)
# LOG_DIR=/path/to/custom/logs

# Maximum size per log file before rotation (bytes, default: 10MB)
LOG_MAX_BYTES=10485760

# Number of backup log files to keep
LOG_BACKUP_COUNT=5

# ============================================================================
# Notes
# ============================================================================

# Windows Paths:
# - Use forward slashes: G:/My Drive/folder
# - Or escape backslashes: G:\\My Drive\\folder
# - Avoid single backslashes: G:\My Drive\folder (will not work)

# AI Features:
# - Requires valid ANTHROPIC_API_KEY
# - Set AI_FEATURES_ENABLED=true to enable
# - Costs apply based on Anthropic API pricing
# - Fallback to non-AI methods if disabled or API fails

# Momentum Scores:
# - Calculated on a 0.0-1.0 scale
# - 0.0-0.2: Weak/Stalled
# - 0.2-0.4: Low momentum
# - 0.4-0.7: Moderate momentum
# - 0.7-1.0: Strong momentum

# File Watching:
# - Disabled by default (requires code changes in main.py)
# - Enable by uncommenting file watcher section in startup_event()
# - Uses debouncing to prevent rapid-fire syncs

# Logging:
# - Logs are stored in backend/logs/ by default (within project directory)
# - project_tracker.log: All logs (rotated at 10MB)
# - project_tracker_errors.log: Errors only
# - Set LOG_LEVEL=DEBUG for verbose output during development

# Authentication:
# - Set AUTH_ENABLED=true to require login
# - Generate a secure SECRET_KEY for production
# - Configure Google OAuth credentials in Google Cloud Console
# - Add redirect URI to authorized redirect URIs in Google Cloud Console
